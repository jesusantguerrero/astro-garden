---
const { pageTitle, seedPath, seedUrl, backlinkTitle } = Astro.props;

const allSeeds = await import.meta.glob(`${seedPath}/*.md`)
let seeds = await Promise.all(
    Object.entries(allSeeds).map(async ([key, seed]) => {
        const url = key.replace(seedPath, seedUrl).replace('.md', '/')
        return seed().then(async content => {
          const source = await content.default()
          return {
              ...source.frontmatter,
              url
          }
        })
    })
)
seeds = seeds.filter(seed => {
  return seed.astro.source.toLowerCase().includes(pageTitle.toLowerCase())
});
---

<div class="garden__backlinks-container">
	{ !seeds.length ? null : <div class="mt-5">
		<h2 class="mb-1 text-xl font-bold text-gray-400">{ backlinkTitle || 'Backlinks' }</h2>
		<ul class="list-disc list-inside">
			{seeds.map(seed => {
				return <li class="mb-2">
					<a href={`${seedUrl}/${seed.slug}`} class="text-accent-400">{seed.title}</a>
				</li>
			})}
		</ul>
	</div>
	}
</div>	
